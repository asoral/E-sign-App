var v=(p,i,d)=>new Promise((m,u)=>{var g=e=>{try{l(d.next(e))}catch(a){u(a)}},x=e=>{try{l(d.throw(e))}catch(a){u(a)}},l=e=>e.done?m(e.value):Promise.resolve(e.value).then(g,x);l((d=d.apply(p,i)).next())});import{u as j,e as N,f as _,r as c,j as t}from"./index-Bs8bVgtG.js";import{Q as D}from"./react-toastify.esm-C37bckj3.js";const k=()=>{const p=j(),i=N(_),[d,m]=c.useState([]),[u,g]=c.useState(!0),[x,l]=c.useState(null),[e,a]=c.useState("all"),f=s=>{p(`/signer/${s.name}`,{state:{documentData:s}})};if(c.useEffect(()=>{i&&v(void 0,null,function*(){try{const r=yield fetch(`/api/method/esign_app.api.get_documents_by_user?user_mail=${i}`,{method:"GET",headers:{"Content-Type":"application/json"}}),o=yield r.json();r.status===200?o.message.data.length>0?m(o.message.data):l("No documentData found"):l("Failed to fetch documentData")}catch(r){l("An error occurred while fetching documentData")}finally{g(!1)}})},[i]),u)return t.jsx("div",{children:"Loading..."});if(x)return t.jsx("div",{children:x});const b=s=>{try{return JSON.parse(s)}catch(r){return console.error("Failed to parse assigned_users:",r),{}}},C=d.filter(s=>{var n;const r=b(s.assigned_users),o=(n=Object.values(r).find(h=>h.email===i))==null?void 0:n.status;return e==="all"||e==="unseen"&&o==="unseen"||e==="opened"&&o==="open"||e==="completed"&&o==="close"});return t.jsxs("div",{className:"relative mt-6 min-w-[1000px] max-w-[1000px] mx-auto",children:[t.jsxs("div",{className:"mb-4 flex gap-1",children:[t.jsx("button",{onClick:()=>a("all"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="all"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} rounded-l-md hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"All"}),t.jsx("button",{onClick:()=>a("opened"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="opened"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Opened"}),t.jsx("button",{onClick:()=>a("completed"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="completed"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Completed"}),t.jsx("button",{onClick:()=>a("unseen"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="unseen"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} rounded-r-md hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Unseen"})]}),t.jsx("div",{className:"flex flex-wrap gap-5",children:C.map((s,r)=>{var w;const o=b(s.assigned_users),n=(w=Object.values(o).find(y=>y.email===i))==null?void 0:w.status;let h="";return n==="unseen"?h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] relative":n==="open"?h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42]":n==="close"&&(h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] opacity-50"),t.jsx("div",{className:"w-[200px] h-[100px] relative",children:t.jsxs("div",{className:`p-4 rounded border-2 transition-colors duration-300 cursor-pointer ${h}`,onClick:()=>f(s),children:[t.jsx("h3",{className:`mt-2 font-bold ${n==="close"?"line-through":""} text-ellipsis overflow-hidden whitespace-nowrap`,children:s.document_title}),t.jsx("p",{className:"text-sm text-ellipsis overflow-hidden whitespace-nowrap",children:new Date(s.document_created_at).toLocaleString()}),n==="unseen"&&t.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-yellow-500 rounded-full shadow-md"})]})},r)})}),t.jsx(D,{})]})};export{k as default};
