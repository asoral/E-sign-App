var dt=Object.defineProperty,ct=Object.defineProperties;var ut=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var ke=(h,g,n)=>g in h?dt(h,g,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[g]=n,F=(h,g)=>{for(var n in g||(g={}))gt.call(g,n)&&ke(h,n,g[n]);if(Pe)for(var n of Pe(g))ht.call(g,n)&&ke(h,n,g[n]);return h},$=(h,g)=>ct(h,ut(g));var _=(h,g,n)=>new Promise((p,l)=>{var x=b=>{try{y(n.next(b))}catch(U){l(U)}},C=b=>{try{y(n.throw(b))}catch(U){l(U)}},y=b=>b.done?p(b.value):Promise.resolve(b.value).then(x,C);y((n=n.apply(h,g)).next())});import{c as ce,e as Ae,r as i,i as pt,j as t,m as mt,u as ft,M as xt}from"./index-vTrzwfGc.js";import{B as L,Y as J,Q as bt}from"./react-toastify.esm-DF0zyQA5.js";import{P as Oe,S as yt,r as G,a as se,b as S}from"./PDFButton-CO-BdWLd.js";import{B as St,P as vt}from"./BlankPDF-VJeL9guq.js";import{S as wt}from"./SignPad-CfaoKHyQ.js";import{M as jt}from"./index-BVMIwh7g.js";import{T as Ee}from"./index-CLEecLn1.js";import{e as _t}from"./extractUniqueElements-Cb8tlYgU.js";import{d as de}from"./dayjsConfig-B0pVY0mJ.js";import{C as Ct}from"./ConfirmDeleteModal-CiFkaYKY.js";import"./PurePanel-DNyvZeh-.js";import"./index-D0F_K97b.js";const{TabPane:Te}=Ee,Nt=({onSelect:h,onClickbtn:g})=>{const n=ce(Ae);i.useRef(null);const[p,l]=i.useState(!1),[x,C]=i.useState(null),[y,b]=i.useState(null),[U,w]=i.useState([]),[D,B]=i.useState(null),[R,K]=i.useState(!1),ae=ce(pt),[ne,M]=i.useState("1"),P=m=>{K(!1),B(m),C(null)},Y=m=>{b(m.target.value)},oe=()=>_(void 0,null,function*(){const m={signature_data:D||x,signature_name:y,user_full_name:ae,user_email:n};try{const O=yield(yield fetch("/api/method/esign_app.api.save_signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();O.message.status<300?(L.success("Sign Created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J}),C(null),B(null),b(""),K(!0)):alert("Error saving signature: "+O.message)}catch(j){console.error("Error:",j),alert("An error occurred while saving the signature")}M("1")}),k=m=>{K(!1),C(m),B(null)};i.useEffect(()=>{(n||R)&&_(void 0,null,function*(){try{const j=yield fetch(`/api/method/esign_app.api.get_signatures?user_mail=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}}),O=yield j.json();j.status===200&&(w(O.message.data),console.log(`++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
`,O.message.data))}catch(j){}})},[n,R]);const re=()=>{l(!0),g()},z=()=>{l(!1)},ie=(m,j,O)=>{h(m,j,O),z()};return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] w-full text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:re,children:"Sign"}),t.jsx(jt,{title:"Signature List",open:p,onCancel:z,footer:[,],width:"70vw",children:t.jsx("div",{className:"min-h-[60vh]",children:t.jsxs(Ee,{activeKey:ne,onChange:M,children:[t.jsx(Te,{tab:"All Signatures",children:t.jsx("div",{className:"all-sign-div",children:U.map((m,j)=>t.jsxs("div",{className:"card",onClick:()=>ie(m.sign_blob,m.cert_pem,m.openssl_name),children:[t.jsx("img",{alt:`Signature ${j}`,src:m.sign_blob,className:"card__image"}),t.jsxs("div",{className:"card__content",children:[t.jsx("p",{className:"card__title",children:m.sign_name}),t.jsx("p",{className:"card__description",children:new Date(m.creation).toLocaleString()})]})]},j))})},"1"),t.jsxs(Te,{tab:"New Signature",children:[t.jsx(wt,{onSave:P,onUpload:k}),D&&t.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Signature Preview"}),t.jsx("img",{src:D,alt:"Signature",style:{maxWidth:"100%",height:"90px"},className:"border border-gray-300 rounded"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[t.jsx("input",{type:"text",className:"border rounded px-4 py-2 h-10 focus:outline-none",placeholder:"Name of Signature",value:y||"",onChange:Y}),t.jsx("button",{onClick:oe,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]}),x&&!D&&t.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded Image Preview"}),t.jsx("img",{src:x,alt:"Uploaded Image",style:{maxWidth:"100%",height:"auto"},className:"border border-gray-300 rounded"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[t.jsx("input",{type:"text",className:"border rounded px-4 py-2 focus:outline-none",placeholder:"Name of Signature",onChange:Y}),t.jsx("button",{onClick:oe,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]})]},"2")]})})})]})};function Dt(h){return new Promise((g,n)=>{const p=new FileReader;p.onloadend=()=>{p.result&&typeof p.result=="string"?g(p.result.split(",")[1]):n(new Error("FileReader did not return a string result"))},p.onerror=l=>n(l),p.readAsDataURL(h)})}function Pt(h,g="application/pdf"){return _(this,null,function*(){return new Promise((n,p)=>{try{const l=atob(h),x=new Array(l.length);for(let b=0;b<l.length;b++)x[b]=l.charCodeAt(b);const C=new Uint8Array(x),y=new Blob([C],{type:g});n(y)}catch(l){p(new Error("Failed to convert Base64 to Blob: "+l))}})})}const $t=()=>{var xe,be;const[h,g]=i.useState(!1),[n,p]=i.useState([]),[l,x]=i.useState(null),[C,y]=i.useState(null),[b,U]=i.useState("");i.useState("");const[w,D]=i.useState(0),[B,R]=i.useState(null),[K,ae]=i.useState([]),[ne,M]=i.useState(!1),[P,Y]=i.useState(St),[oe,k]=i.useState(null),re=i.useRef(null),z=i.useRef(null),ie=i.useRef(null),m=mt(),[j,O]=i.useState([]),[q,Q]=i.useState(0),{documentData:f}=m.state||{},[ue,ge]=i.useState([]);i.useState("");const le=ce(Ae),he=ft();if(!f)return console.log("No document data",JSON.stringify(f)),t.jsx("p",{children:"Document not found"});i.useEffect(()=>{var e;if(l!==null){const s=n.find(a=>a.id===l);k(s?{id:s.id,type:s.type,checked:(e=s.checked)!=null?e:!1,content:s.content}:null)}},[l,C,n]),i.useEffect(()=>{console.log("Fetch Data before if useEffect  --->>>>>"),q||(console.log("Fetch Data Inside if isCompleted --->>>>>"),_(void 0,null,function*(){try{console.log("Fetch Data Inside function inside try --->>>>>");const s=yield fetch(`/api/method/esign_app.api.get_assigned_users_list_check?user_document_name=${f.name}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){console.log("response Is OK --->>>>>");const a=yield s.json();ae(a.message.data.assigned_users||[]),ge(a.message.data.opensslusedlist||[]),console.log("Data OPen SSL =======>",a.message.data.opensslusedlist);const o=JSON.parse(a.message.data.assigned_users);console.log("here is Assigned user List data",o);const r={unseen:0,open:0,close:0};if(Object.values(o).forEach(c=>{c.status in r&&r[c.status]++}),console.log(r,"-------------------->IMG Count-------------"),r.unseen>0){Q(0);return}if(r.open>0){Q(0);return}r.open+r.unseen==0&&(Q(1),Ue())}else console.error("Error fetching data:",s.statusText)}catch(s){console.error("Fetch error:",s)}finally{}}))},[]);const Ue=()=>_(void 0,null,function*(){console.log("inside updateDocumentStatus");try{const e=yield fetch(`/api/method/esign_app.api.update_document_status_confirm?user_document_name=${f.name}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){console.log("inside updateDocumentStatus ------------> OK");const s=yield e.json();console.log(s.message,"Document status updated successfully.",q)}}catch(e){console.error("Fetch error:",e)}finally{}});i.useEffect(()=>{_(void 0,null,function*(){try{const a=yield(yield fetch(`/api/method/esign_app.api.get_document_components_and_basepdf?document_name=${f?f.name:""}`)).json();if(console.log(a),a.message.document_json_data==null||a.message.base_pdf_datad==null)return;if(a.message.status===200){Q(a.message.iscompleted);const o=typeof a.message.document_json_data=="string"?JSON.parse(a.message.document_json_data):a.message.document_json_data,r=typeof a.message.base_pdf_datad=="string"?JSON.parse(a.message.base_pdf_datad):a.message.base_pdf_datad,c=typeof a.message.assigned_users=="string"?JSON.parse(a.message.assigned_users):a.message.assigned_users;R(c),console.log("User Status Document list ------------------>",c);try{for(let T in c)if(c.hasOwnProperty(T)){const v=c[T];if(v.email===le){if(console.log(`Email found at index ${T}, status: ${v.status}`),v.status==="unseen"){v.status="open",c[T]=v,R(c);const X={document_title:f.name,assigned_user_list:JSON.stringify(c)};try{const W=yield(yield fetch("/api/method/esign_app.api.patch_user_status_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).json();console.log(JSON.stringify(W)),W.message.status<300}catch(V){console.error("Error:",V)}}else v.status==="close"&&(g(!0),console.log(`Status: ${v.status}`));break}}}catch(T){}console.log("Parrsed data : ",o),p(o),Y(r)}}catch(s){console.error("Error:",s)}}),pe()},[]);const pe=()=>{const e=_t(n);O(e)};i.useEffect(()=>{pe()},[n]),i.useEffect(()=>{var e;if(l!==null){const s=n.find(a=>a.id===l);k(s?{id:s.id,type:s.type,checked:(e=s.checked)!=null?e:!1,content:s.content}:null)}},[l,C,n]);const Ie=()=>{w<P.length-1&&(D(w+1),y(null),x(null))},Fe=()=>_(void 0,null,function*(){qe();try{const s=yield(yield fetch("/api/method/esign_app.api.generate_and_sign_pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_name:f.name})})).json();console.log(JSON.stringify(s));const a=yield Pt(s.message);console.log(s.signed_pdf_base64);const o=URL.createObjectURL(a),r=`esignDoc-${f.document_title}`,c=document.createElement("a");c.href=o,c.download=`${r}.pdf`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o),s.message.status<300?(L.success("PDF genrated Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J}),setTimeout(()=>{window.open(s.message.pdf_url,"_blank")},2500)):console.error("Error printing PDF:",s.message.error)}catch(e){console.error("Error:",e)}}),Be=()=>_(void 0,null,function*(){const e={document_title:f.name,document_json_data:JSON.stringify(n),opensslusedlist:ue};try{const a=yield(yield fetch("/api/method/esign_app.api.submit_final_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();console.log(JSON.stringify(a)),a.message.status<300?(He(),L.success("Document Submitted Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J}),setTimeout(()=>{he("/inbox")},1500)):L.error("Error Submitting Document...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J})}catch(s){L.error("Server Error, Please Try Again...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J})}}),Re=()=>{M(!1)},Me=()=>{Be(),M(!1)},ze=()=>{M(!0)},He=()=>{if(B){const e=F({},B);let s=!1;Object.keys(e).forEach(a=>{e[a].email===le&&e[a].status==="open"&&(e[a].status="close",s=!0,R(e),console.log("Updated data of assigned users:",e),$e(e))}),s||console.log('No matching user with "open" status found.')}},$e=e=>_(void 0,null,function*(){const s={document_title:f.name,assigned_user_list:JSON.stringify(e)};try{const o=yield(yield fetch("/api/method/esign_app.api.patch_user_status_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();console.log("API response:",o)}catch(a){console.error("Error sending data to API:",a)}}),Le=()=>{w>0&&(D(w-1),y(null),x(null))},Je=(e,s,a)=>{p(o=>o.map(r=>r.id===l?$(F({},r),{content:e,value:e,cert_pem:s}):r)),ge(o=>{const r=typeof o=="string"?JSON.parse(o):o;if(!Array.isArray(r))return console.error("prevList is not an array:",r),[];const c=[...r,{name:a,status:"notapplied"}];return console.log("Updated List:",c),c}),console.log(a),console.log(ue),y(null),x(null),k(null)},me=()=>{y(null)},Ve=(e,s)=>{const a=e.target.checked;p(o=>o.map(r=>r.id===s?$(F({},r),{checked:a}):r))},We=(e,s)=>{const a=e.target.value;p(o=>o.map(r=>r.id===s?$(F({},r),{content:a,value:a}):r))},Ge=e=>{const s=e.target.value;l!==null&&p(a=>a.map(o=>o.id===l?$(F({},o),{content:s,value:s}):o))},Ke=e=>{e.target.closest(".component")||(x(null),y(null))};i.useEffect(()=>{if(l!==null){const e=document.querySelector(`[data-id="${l}"]`);y(e);const s=n.find(a=>a.id===l);(s==null?void 0:s.type)==="text"&&U(s.content||"")}},[l,n]),i.useEffect(()=>{if(l!==null){const e=n.find(s=>s.id===l);k(e?{id:e.id,type:e.type,checked:e.checked||!1,content:e.content||""}:null)}},[l,C,n]);const fe=e=>Uint8Array.from(atob(e),s=>s.charCodeAt(0)),Ye=(e,s)=>{var o;const a=(o=e.target.files)==null?void 0:o[0];if(a){const r=new FileReader;r.onloadend=()=>{const c=r.result;p(T=>T.map(v=>v.id===s?$(F({},v),{content:c}):v))},r.readAsDataURL(a)}},qe=()=>_(void 0,null,function*(){var X,V,W,ye,Se,ve,we,je;const e=yield Oe.create(),s=yield e.embedFont(yt.TimesRoman);for(let u=0;u<P.length;u++){const A=fe(P[u].data),Z=yield Oe.load(A);(yield e.copyPages(Z,Z.getPageIndices())).forEach(I=>e.addPage(I))}const a=n.reduce((u,A)=>(u[A.pageNo]||(u[A.pageNo]=[]),u[A.pageNo].push(A),u),{}),o=e.getPages();for(const u of o){const A=o.indexOf(u),Z=a[A]||[];for(const d of Z){const{left:I,top:ee}=d.position;if(d.type==="text"||d.type==="v_text"){const N=(X=d.fontSize)!=null?X:12,E=u.getHeight()-ee-N-3;u.drawText(d.content||"",{x:I+3,y:E,size:N,color:G(0,0,0),lineHeight:N*1.2,maxWidth:(W=(V=d.size)==null?void 0:V.width)!=null?W:0,font:s})}else if((d.type==="image"||d.type==="v_image"||d.type==="v_signature"||d.type==="signature")&&d.content){const N=d.content.split(",")[1];if(!N){console.error("Invalid image data");continue}if(d.type==="signature"){const ot=d.name||"Unknown",rt=new Date().toISOString(),it=se.of(`Certificate: ${d.cert_pem}
Signer: ${ot}
SignedAt: ${rt}`),lt=e.context.obj({Type:S.of("Annot"),Subtype:S.of("Widget"),T:se.of(`Signature_${A}_${d.name}`),Contents:it,Rect:[0,0,0,0],P:u.ref,F:4});let te=u.node.lookup(S.of("Annots"));te||(te=e.context.obj([]),u.node.set(S.of("Annots"),te)),te.push(lt),u.node.set(S.of("Group"),e.context.obj({Type:S.of("Group"),S:S.of("Transparency"),CS:S.of("DeviceRGB")})),console.log(`Certificate embedded as annotation for ${d.name}`)}const E=fe(N);let H;if(d.content.startsWith("data:image/png"))H=yield e.embedPng(E);else if(d.content.startsWith("data:image/jpeg")||d.content.startsWith("data:image/jpg"))H=yield e.embedJpg(E);else{console.error("Unsupported image format");continue}const{width:_e,height:Ce}=H,Xe=(Se=(ye=d.size)==null?void 0:ye.width)!=null?Se:0,Ze=(we=(ve=d.size)==null?void 0:ve.height)!=null?we:0,et=Xe/_e,tt=Ze/Ce,Ne=Math.min(et,tt),st=_e*Ne,De=Ce*Ne,at=I,nt=u.getHeight()-ee-De;u.drawImage(H,{x:at,y:nt,width:st,height:De})}else if(d.type==="checkbox"){const E=u.getHeight()-ee-10-5;d.checked?u.drawRectangle({x:I+5,y:E,width:10,height:10,color:G(0,0,0)}):u.drawRectangle({x:I+5,y:E,width:10,height:10,borderColor:G(0,0,0),borderWidth:1,color:G(1,1,1)})}else if(d.type==="m_date"||d.type==="live_date"||d.type==="fix_date"){const N=(je=d.fontSize)!=null?je:12,E=u.getHeight()-ee-N-3,H=d.content||new Date().toLocaleDateString();u.drawText(H,{x:I+3,y:E,size:N,color:G(0,0,0),font:s})}}}e.catalog.set(S.of("OutputIntent"),e.context.obj({Type:S.of("OutputIntent"),S:S.of("GTS_PDFA1"),OutputConditionIdentifier:se.of("sRGB IEC61966-2.1"),Info:se.of("sRGB IEC61966-2.1")}));const r=e.context.obj({Type:S.of("Metadata"),Subtype:S.of("XML"),Length:0});e.catalog.set(S.of("Metadata"),r),e.setTitle("Document signed by eSign"),e.setAuthor("Dexciss Technology"),e.setSubject("eSign"),e.setKeywords(["Dexciss Technology","eSign"]),e.setCreationDate(new Date),e.setModificationDate(new Date);const c=yield e.save(),T=new Blob([c],{type:"application/pdf"}),v=yield Dt(T);console.log("lvl1"),Qe(v),L.success("PDF Has Been Merged",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:J})}),Qe=e=>_(void 0,null,function*(){const s={document_title:f.name,validated_pdf:e};console.log("inside merge and save");try{const a=yield fetch("/api/method/esign_app.api.mergeAndPrintSave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to process the document.");const o=yield a.json();return console.log("Document processed successfully:",o),o}catch(a){throw console.error("Error in mergeAndPrintSave:",a),a}});return f?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-xs flex items-center gap-3 relative p-6 bg-[#283C42] text-white border-2 border-transparent hover:border-[#283C42] transition-colors duration-300",children:[t.jsx("div",{children:t.jsx("button",{className:"button",onClick:()=>he(-1),children:t.jsxs("div",{className:"button-box",children:[t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})}),t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})})]})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold ",style:{fontVariant:"small-caps"},children:f.document_title}),t.jsx("p",{className:"text-xs",children:f.template_title}),t.jsxs("p",{className:"text-xs",children:["Email: ",f.owner_email]}),t.jsxs("p",{className:"text-sm",children:["Created At: ",de(f.document_created_at).format("DD/MM/YYYY - HH:mm")," (",de().to(de(f.document_created_at)),")"]})]})]}),t.jsxs("div",{className:`${h?"":"templete-main-div-signer"} `,children:[t.jsxs("div",{className:"templete-app text-xs",children:[t.jsxs("div",{className:"flex gap-3 mb-2",children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 min-w-[5rem] max-w-[5rem] rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Le,disabled:w===0,children:"Previous"}),t.jsxs("h1",{className:"mt-2",children:[w+1," / ",P.length]}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 min-w-[5rem] max-w-[5rem] border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Ie,disabled:w===P.length-1,children:"Next"}),q==1&&t.jsx(t.Fragment,{children:t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2  border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Fe,children:"Print"})}),h&&q==0&&t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 cursor-not-allowed rounded border-2  border-transparent transition-colors duration-300",disabled:w===P.length-1,children:t.jsx("svg",{"data-name":"Layer 1",viewBox:"0 0 24 24",fill:"currentColor",height:"1.7em",width:"1.7em",children:t.jsx("path",{d:"M7 10a1 1 0 101 1 1 1 0 00-1-1zM3.71 2.29a1 1 0 00-1.42 1.42L4.62 6A3 3 0 002 9v6a3 3 0 003 3h1v3a1 1 0 001 1h10a1 1 0 001-1v-1.59l2.29 2.3a1 1 0 001.42 0 1 1 0 000-1.42zM6 15v1H5a1 1 0 01-1-1V9a1 1 0 011-1h1.59l6 6H7a1 1 0 00-1 1zm10 5H8v-4h6.59L16 17.41zm3-14h-1V3a1 1 0 00-1-1H8.66a1 1 0 000 2H16v2h-3.34a1 1 0 000 2H19a1 1 0 011 1v6a.37.37 0 010 .11 1 1 0 00.78 1.18h.2a1 1 0 001-.8A2.84 2.84 0 0022 15V9a3 3 0 00-3-3z"})})})]}),t.jsxs("div",{className:"workspace",ref:z,onClick:Ke,children:[t.jsx(vt,{pdfData:P[w].data}),n.filter(e=>e.pageNo===w).map(e=>{var s,a,o,r;return t.jsxs("div",{"data-id":e.id,className:` ${e.type} ${l===e.id?"selected":""}`,style:{position:"absolute",top:e.position.top,left:e.position.left,width:(a=(s=e.size)==null?void 0:s.width)!=null?a:0,height:(r=(o=e.size)==null?void 0:o.height)!=null?r:0,border:l===e.id?"1px solid red":"none",fontSize:`${e.fontSize}px`,userSelect:"none",overflow:"hidden"},onClick:c=>{c.stopPropagation(),x(e.id)},children:[e.type==="text"&&t.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",fontSize:"inherit",outline:"none"},children:e.value||"Text Here"}),e.type==="image"&&!e.content&&t.jsx("div",{}),e.type==="v_image"&&!e.content&&t.jsx("div",{}),(e.type==="image"||e.type==="v_image"||e.type==="signature"||e.type==="v_signature")&&e.content&&t.jsx("img",{src:e.content,alt:"Uploaded",style:{width:"100%",height:"100%"}}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,readOnly:!0}),e.type==="m_date"&&t.jsx("input",{type:"date",value:e.content||"",readOnly:!0}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),e.type==="fix_date"&&t.jsx("input",{type:"date",value:e.content||"",readOnly:!0}),e.type==="v_text"&&t.jsx("div",{children:e.content||"Editable Text"})]},e.id)}),t.jsx(xt,{ref:re,bounds:{left:0,top:0,right:((xe=z.current)==null?void 0:xe.offsetWidth)||0,bottom:((be=z.current)==null?void 0:be.offsetHeight)||0}})]})]}),t.jsxs("div",{className:`right-div-signer p-5 cursor-pointer ${h?"hidden":""}`,children:[t.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-md overflow-hidden ",children:[t.jsx("button",{onClick:ze,className:"bg-[#283C42] text-white px-4 py-2 mb-4  border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",children:"Submit"}),t.jsxs("table",{className:"w-full signer-table ",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[#283C42] text-white",children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"Sr."}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Component"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Page No."}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Input"})]})}),t.jsx("tbody",{children:n.filter(e=>{var s;return(s=e.assign)==null?void 0:s.includes(le)}).map((e,s)=>t.jsxs("tr",{className:`${l===e.id?"selected-row bg-blue-100":""} ${s%2===0?"bg-gray-50":"bg-white"}`,onClick:()=>{x(e.id),D(e.pageNo),me()},children:[t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",children:s+1}),t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",onClick:()=>{x(e.id)},children:e.name}),t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",children:e.pageNo+1}),t.jsxs("td",{className:"py-2 px-4 border-b border-gray-200 max-w-[18vw]",children:[e.type==="signature"&&t.jsx(Nt,{onSelect:Je,onClickbtn:me}),e.type==="image"&&t.jsx("input",{type:"file",accept:"image/*",onChange:a=>Ye(a,e.id)}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,onChange:a=>Ve(a,e.id)}),(e.type==="m_date"||e.type==="fix_date")&&t.jsx("input",{type:"date",value:e.content||"",onChange:a=>We(a,e.id)}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),e.type==="text"&&t.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",ref:ie,type:"text",value:e.content||"",onClick:()=>{x(e.id),D(e.pageNo)},onChange:Ge,placeholder:"Edit text here"})]})]},e.id))})]})]}),t.jsx(Ct,{visible:ne,name:f.name,onCancel:Re,onConfirm:Me,message:"Are you sure you want to submit this document? After That You Can't Change or Edit Document !",module:"Document Submit"})]})]}),t.jsx(bt,{limit:1})]}):t.jsx("div",{children:"No Doc data available"})};export{$t as default};
